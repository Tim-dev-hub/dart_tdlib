import 'objects.dart';
import 'package:reflectable/reflectable.dart';

class Reflector extends Reflectable {
  const Reflector() :
    super(typeCapability, instanceInvokeCapability, newInstanceCapability);
}

const reflector = Reflector();

/// Attempts to parse an object as a [TdObject], or else returns the object
/// as is
dynamic tryConvertToTdObject(dynamic obj) {
  if (obj is Map) {
    return obj.containsKey('@type') ?
      (reflector.reflectType(classIndex[obj['@type']]) as ClassMirror)
        .newInstance('fromJson', [obj]) :
      obj;
  }

  return obj;
}

const Map<String, Type> classIndex = {
"Error" : error,
"Ok" : ok,
"TdlibParameters" : tdlibParameters,
"AuthenticationCodeType" : authenticationCodeType,
"AuthenticationCodeInfo" : authenticationCodeInfo,
"EmailAddressAuthenticationCodeInfo" : emailAddressAuthenticationCodeInfo,
"TextEntity" : textEntity,
"TextEntities" : textEntities,
"FormattedText" : formattedText,
"TermsOfService" : termsOfService,
"AuthorizationState" : authorizationState,
"PasswordState" : passwordState,
"RecoveryEmailAddress" : recoveryEmailAddress,
"TemporaryPasswordState" : temporaryPasswordState,
"LocalFile" : localFile,
"RemoteFile" : remoteFile,
"File" : file,
"InputFile" : inputFile,
"PhotoSize" : photoSize,
"Minithumbnail" : minithumbnail,
"ThumbnailFormat" : thumbnailFormat,
"Thumbnail" : thumbnail,
"MaskPoint" : maskPoint,
"MaskPosition" : maskPosition,
"ClosedVectorPath" : closedVectorPath,
"PollOption" : pollOption,
"PollType" : pollType,
"Animation" : animation,
"Audio" : audio,
"Document" : document,
"Photo" : photo,
"Sticker" : sticker,
"Video" : video,
"VideoNote" : videoNote,
"VoiceNote" : voiceNote,
"Contact" : contact,
"Location" : location,
"Venue" : venue,
"Game" : game,
"Poll" : poll,
"ProfilePhoto" : profilePhoto,
"ChatPhotoInfo" : chatPhotoInfo,
"UserType" : userType,
"BotCommand" : botCommand,
"BotCommands" : botCommands,
"ChatLocation" : chatLocation,
"AnimatedChatPhoto" : animatedChatPhoto,
"ChatPhoto" : chatPhoto,
"ChatPhotos" : chatPhotos,
"InputChatPhoto" : inputChatPhoto,
"User" : user,
"UserFullInfo" : userFullInfo,
"Users" : users,
"ChatAdministrator" : chatAdministrator,
"ChatAdministrators" : chatAdministrators,
"ChatPermissions" : chatPermissions,
"ChatMemberStatus" : chatMemberStatus,
"ChatMember" : chatMember,
"ChatMembers" : chatMembers,
"ChatMembersFilter" : chatMembersFilter,
"SupergroupMembersFilter" : supergroupMembersFilter,
"ChatInviteLink" : chatInviteLink,
"ChatInviteLinks" : chatInviteLinks,
"ChatInviteLinkCount" : chatInviteLinkCount,
"ChatInviteLinkCounts" : chatInviteLinkCounts,
"ChatInviteLinkMember" : chatInviteLinkMember,
"ChatInviteLinkMembers" : chatInviteLinkMembers,
"ChatInviteLinkInfo" : chatInviteLinkInfo,
"BasicGroup" : basicGroup,
"BasicGroupFullInfo" : basicGroupFullInfo,
"Supergroup" : supergroup,
"SupergroupFullInfo" : supergroupFullInfo,
"SecretChatState" : secretChatState,
"SecretChat" : secretChat,
"MessageSender" : messageSender,
"MessageSenders" : messageSenders,
"MessageForwardOrigin" : messageForwardOrigin,
"MessageForwardInfo" : messageForwardInfo,
"MessageReplyInfo" : messageReplyInfo,
"MessageInteractionInfo" : messageInteractionInfo,
"MessageSendingState" : messageSendingState,
"Message" : message,
"Messages" : messages,
"FoundMessages" : foundMessages,
"SponsoredMessage" : sponsoredMessage,
"SponsoredMessages" : sponsoredMessages,
"NotificationSettingsScope" : notificationSettingsScope,
"ChatNotificationSettings" : chatNotificationSettings,
"ScopeNotificationSettings" : scopeNotificationSettings,
"DraftMessage" : draftMessage,
"ChatType" : chatType,
"ChatFilter" : chatFilter,
"ChatFilterInfo" : chatFilterInfo,
"RecommendedChatFilter" : recommendedChatFilter,
"RecommendedChatFilters" : recommendedChatFilters,
"ChatList" : chatList,
"ChatLists" : chatLists,
"ChatSource" : chatSource,
"ChatPosition" : chatPosition,
"VoiceChat" : voiceChat,
"Chat" : chat,
"Chats" : chats,
"ChatNearby" : chatNearby,
"ChatsNearby" : chatsNearby,
"PublicChatType" : publicChatType,
"ChatActionBar" : chatActionBar,
"KeyboardButtonType" : keyboardButtonType,
"KeyboardButton" : keyboardButton,
"InlineKeyboardButtonType" : inlineKeyboardButtonType,
"InlineKeyboardButton" : inlineKeyboardButton,
"ReplyMarkup" : replyMarkup,
"LoginUrlInfo" : loginUrlInfo,
"MessageThreadInfo" : messageThreadInfo,
"RichText" : richText,
"PageBlockCaption" : pageBlockCaption,
"PageBlockListItem" : pageBlockListItem,
"PageBlockHorizontalAlignment" : pageBlockHorizontalAlignment,
"PageBlockVerticalAlignment" : pageBlockVerticalAlignment,
"PageBlockTableCell" : pageBlockTableCell,
"PageBlockRelatedArticle" : pageBlockRelatedArticle,
"PageBlock" : pageBlock,
"WebPageInstantView" : webPageInstantView,
"WebPage" : webPage,
"CountryInfo" : countryInfo,
"Countries" : countries,
"PhoneNumberInfo" : phoneNumberInfo,
"BankCardActionOpenUrl" : bankCardActionOpenUrl,
"BankCardInfo" : bankCardInfo,
"Address" : address,
"LabeledPricePart" : labeledPricePart,
"Invoice" : invoice,
"OrderInfo" : orderInfo,
"ShippingOption" : shippingOption,
"SavedCredentials" : savedCredentials,
"InputCredentials" : inputCredentials,
"PaymentsProviderStripe" : paymentsProviderStripe,
"PaymentFormTheme" : paymentFormTheme,
"PaymentForm" : paymentForm,
"ValidatedOrderInfo" : validatedOrderInfo,
"PaymentResult" : paymentResult,
"PaymentReceipt" : paymentReceipt,
"DatedFile" : datedFile,
"PassportElementType" : passportElementType,
"Date" : date,
"PersonalDetails" : personalDetails,
"IdentityDocument" : identityDocument,
"InputIdentityDocument" : inputIdentityDocument,
"PersonalDocument" : personalDocument,
"InputPersonalDocument" : inputPersonalDocument,
"PassportElement" : passportElement,
"InputPassportElement" : inputPassportElement,
"PassportElements" : passportElements,
"PassportElementErrorSource" : passportElementErrorSource,
"PassportElementError" : passportElementError,
"PassportSuitableElement" : passportSuitableElement,
"PassportRequiredElement" : passportRequiredElement,
"PassportAuthorizationForm" : passportAuthorizationForm,
"PassportElementsWithErrors" : passportElementsWithErrors,
"EncryptedCredentials" : encryptedCredentials,
"EncryptedPassportElement" : encryptedPassportElement,
"InputPassportElementErrorSource" : inputPassportElementErrorSource,
"InputPassportElementError" : inputPassportElementError,
"MessageContent" : messageContent,
"TextEntityType" : textEntityType,
"InputThumbnail" : inputThumbnail,
"MessageSchedulingState" : messageSchedulingState,
"MessageSendOptions" : messageSendOptions,
"MessageCopyOptions" : messageCopyOptions,
"InputMessageContent" : inputMessageContent,
"SearchMessagesFilter" : searchMessagesFilter,
"ChatAction" : chatAction,
"UserStatus" : userStatus,
"Stickers" : stickers,
"Emojis" : emojis,
"StickerSet" : stickerSet,
"StickerSetInfo" : stickerSetInfo,
"StickerSets" : stickerSets,
"CallDiscardReason" : callDiscardReason,
"CallProtocol" : callProtocol,
"CallServerType" : callServerType,
"CallServer" : callServer,
"CallId" : callId,
"GroupCallId" : groupCallId,
"CallState" : callState,
"GroupCallVideoQuality" : groupCallVideoQuality,
"GroupCallRecentSpeaker" : groupCallRecentSpeaker,
"GroupCall" : groupCall,
"GroupCallVideoSourceGroup" : groupCallVideoSourceGroup,
"GroupCallParticipantVideoInfo" : groupCallParticipantVideoInfo,
"GroupCallParticipant" : groupCallParticipant,
"CallProblem" : callProblem,
"Call" : call,
"PhoneNumberAuthenticationSettings" : phoneNumberAuthenticationSettings,
"Animations" : animations,
"DiceStickers" : diceStickers,
"ImportedContacts" : importedContacts,
"HttpUrl" : httpUrl,
"InputInlineQueryResult" : inputInlineQueryResult,
"InlineQueryResult" : inlineQueryResult,
"InlineQueryResults" : inlineQueryResults,
"CallbackQueryPayload" : callbackQueryPayload,
"CallbackQueryAnswer" : callbackQueryAnswer,
"CustomRequestResult" : customRequestResult,
"GameHighScore" : gameHighScore,
"GameHighScores" : gameHighScores,
"ChatEventAction" : chatEventAction,
"ChatEvent" : chatEvent,
"ChatEvents" : chatEvents,
"ChatEventLogFilters" : chatEventLogFilters,
"LanguagePackStringValue" : languagePackStringValue,
"LanguagePackString" : languagePackString,
"LanguagePackStrings" : languagePackStrings,
"LanguagePackInfo" : languagePackInfo,
"LocalizationTargetInfo" : localizationTargetInfo,
"DeviceToken" : deviceToken,
"PushReceiverId" : pushReceiverId,
"BackgroundFill" : backgroundFill,
"BackgroundType" : backgroundType,
"Background" : background,
"Backgrounds" : backgrounds,
"InputBackground" : inputBackground,
"ThemeSettings" : themeSettings,
"ChatTheme" : chatTheme,
"Hashtags" : hashtags,
"CanTransferOwnershipResult" : canTransferOwnershipResult,
"CheckChatUsernameResult" : checkChatUsernameResult,
"CheckStickerSetNameResult" : checkStickerSetNameResult,
"ResetPasswordResult" : resetPasswordResult,
"MessageFileType" : messageFileType,
"PushMessageContent" : pushMessageContent,
"NotificationType" : notificationType,
"NotificationGroupType" : notificationGroupType,
"Notification" : notification,
"NotificationGroup" : notificationGroup,
"OptionValue" : optionValue,
"JsonObjectMember" : jsonObjectMember,
"JsonValue" : jsonValue,
"UserPrivacySettingRule" : userPrivacySettingRule,
"UserPrivacySettingRules" : userPrivacySettingRules,
"UserPrivacySetting" : userPrivacySetting,
"AccountTtl" : accountTtl,
"Session" : session,
"Sessions" : sessions,
"ConnectedWebsite" : connectedWebsite,
"ConnectedWebsites" : connectedWebsites,
"ChatReportReason" : chatReportReason,
"InternalLinkType" : internalLinkType,
"MessageLink" : messageLink,
"MessageLinkInfo" : messageLinkInfo,
"FilePart" : filePart,
"FileType" : fileType,
"StorageStatisticsByFileType" : storageStatisticsByFileType,
"StorageStatisticsByChat" : storageStatisticsByChat,
"StorageStatistics" : storageStatistics,
"StorageStatisticsFast" : storageStatisticsFast,
"DatabaseStatistics" : databaseStatistics,
"NetworkType" : networkType,
"NetworkStatisticsEntry" : networkStatisticsEntry,
"NetworkStatistics" : networkStatistics,
"AutoDownloadSettings" : autoDownloadSettings,
"AutoDownloadSettingsPresets" : autoDownloadSettingsPresets,
"ConnectionState" : connectionState,
"TopChatCategory" : topChatCategory,
"TMeUrlType" : tMeUrlType,
"TMeUrl" : tMeUrl,
"TMeUrls" : tMeUrls,
"SuggestedAction" : suggestedAction,
"Count" : count,
"Text" : text,
"Seconds" : seconds,
"DeepLinkInfo" : deepLinkInfo,
"TextParseMode" : textParseMode,
"ProxyType" : proxyType,
"Proxy" : proxy,
"Proxies" : proxies,
"InputSticker" : inputSticker,
"DateRange" : dateRange,
"StatisticalValue" : statisticalValue,
"StatisticalGraph" : statisticalGraph,
"ChatStatisticsMessageInteractionInfo" : chatStatisticsMessageInteractionInfo,
"ChatStatisticsMessageSenderInfo" : chatStatisticsMessageSenderInfo,
"ChatStatisticsAdministratorActionsInfo" : chatStatisticsAdministratorActionsInfo,
"ChatStatisticsInviterInfo" : chatStatisticsInviterInfo,
"ChatStatistics" : chatStatistics,
"MessageStatistics" : messageStatistics,
"Point" : point,
"VectorPathCommand" : vectorPathCommand,
"BotCommandScope" : botCommandScope,
"Update" : update,
"Updates" : updates,
"LogStream" : logStream,
"LogVerbosityLevel" : logVerbosityLevel,
"LogTags" : logTags,
"TestInt" : testInt,
"TestString" : testString,
"TestBytes" : testBytes,
"TestVectorInt" : testVectorInt,
"TestVectorIntObject" : testVectorIntObject,
"TestVectorString" : testVectorString,
"TestVectorStringObject" : testVectorStringObject
};
